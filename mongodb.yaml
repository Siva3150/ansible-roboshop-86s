- name: Configuring mongodb 
  hosts: mongodb 
  become: yes 
  tasks: 
  - name: Copying mongo repo 
    ansible.builtin.copy: 
     src: mongo.repo 
     dest: /etc/yum.repos.d/mongo.repo

  - name: Install mongodb 
    ansible.builtin.package: 
     name: mongodb-org
     state: present 

  - name: Allow remote connections 
    ansible.builtin.replace:
      path: /etc/mongod.conf
      regexp: '127.0.0.0'
      replace: '0.0.0.0'

  - name: start and enable mongodb service 
    ansible.builtin.service: 
     name: mongod
     state: started 
     enabled: yes  